webpackJsonp([1],{"+Wpa":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}()},"/9Vk":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(e){this.payload=e,this.type=t.type}return t}();o.type="CLOUD__ACCESS_TOKEN_OBTAINED"},0:function(t,e,n){t.exports=n("cDNt")},"6LYz":function(t,e,n){"use strict";var o=n("eqpX"),r=(n.n(o),n("/oeL")),i=n("Tl+Y"),c=n("/9Vk"),a=n("J1RF");n.d(e,"a",function(){return f});var s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t,e){var n=this;this.actions$=t,this.persistence=e,this.storeAccessToken=this.actions$.ofType(c.a.type).do(function(t){n.persistence.setAccessToken(t.payload)})}return t}();s([n.i(i.a)({dispatch:!1}),u("design:type",Object)],f.prototype,"storeAccessToken",void 0),f=s([n.i(r.Injectable)(),u("design:paramtypes",["function"==typeof(p=void 0!==i.b&&i.b)&&p||Object,"function"==typeof(l=void 0!==a.a&&a.a)&&l||Object])],f);var p,l},"7PZZ":function(t,e,n){"use strict";var o=n("/oeL"),r=n("ycpL"),i=n("W+Ob");n.d(e,"a",function(){return s});var c=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=u=function(){function t(t,e){this.cloud=e,this.window=t.nativeWindow,this.dbFactory=t.nativeWindow.indexedDB}return t.prototype.openDatabase=function(){var t=this;return new Promise(function(e,n){var o=t.dbFactory.open(t.cloud.name);o.onsuccess=function(n){t.database=n.target.result,t.database.onerror=function(e){t.window.console.error("Database error: %s",e.target.errorCode)},t.window.console.info("Database opened"),e()},o.onupgradeneeded=function(e){var n=e.target.result;t.window.console.log("Creating files object store"),n.createObjectStore(u.FilesStoreName,{keyPath:"path"})}})},t.prototype.processUpdate=function(t){var e=this;return new Promise(function(n,o){var r=e.database.transaction(u.FilesStoreName,"readwrite");r.oncomplete=function(){return n(t)},r.onerror=function(t){return o(t)};var i=r.objectStore(u.FilesStoreName);t.deletedPaths.length>0&&e.purgeFiles(t.deletedPaths,i),t.updatedItems.forEach(function(t){t.isDirectory?e.removeFileIfExists(t,i):e.addFile(t,i)})})},t.prototype.purgeFiles=function(t,e){var n=this;e.openCursor().onsuccess=function(e){var o=e.target.result;o&&(t.some(function(t){return o.key.startsWith(t)})?o.delete().onsuccess=function(){n.window.console.info("REMOVED %s",o.key),o.continue()}:o.continue())}},t.prototype.removeFileIfExists=function(t,e){var n=this;e.get(t.path).onsuccess=function(o){o.target.result&&(e.delete(t.path).onsuccess=function(){return n.window.console.info("REMOVED %s",t.path)})}},t.prototype.addFile=function(t,e){var n=this;t.mimeType.startsWith("audio/mpeg")||"audio/wav"===t.mimeType||t.path.endsWith(".mp3")?e.put({path:t.path,tags:null}).onsuccess=function(){return n.window.console.info("ADDED %s",t.path)}:this.window.console.log("IGNORED %s due to mime-type %s",t.path,t.mimeType)},t.prototype.getFiles=function(){var t=this;return new Promise(function(e,n){var o=t.database.transaction(u.FilesStoreName,"readonly").objectStore(u.FilesStoreName),r=o.getAll();r.onsuccess=function(){return e(r.result.map(function(t){return{path:t.path,url:""}}))},r.onerror=function(t){return n(t)}})},t}();s.FilesStoreName="files",s=u=c([n.i(o.Injectable)(),a("design:paramtypes",["function"==typeof(f=void 0!==r.a&&r.a)&&f||Object,"function"==typeof(p=void 0!==i.b&&i.b)&&p||Object])],s);var u,f,p},BKIR:function(t,e,n){"use strict";function o(t,e){switch(void 0===t&&(t={accessToken:null}),e.type){case r.a.type:return i({},t,{accessToken:e.payload})}return t}var r=n("/9Vk");e.a=o,n.d(e,"b",function(){return c});var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},c=function(t){return t.accessToken}},Dk7z:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},J1RF:function(t,e,n){"use strict";var o=n("/oeL"),r=n("ycpL"),i=n("W+Ob");n.d(e,"a",function(){return s});var c=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t,e){this.storage=t.nativeWindow.localStorage,this.accessTokenKey=e.name+"_oauth_token",this.lastCursorKey=e.name+"_last_cursor"}return Object.defineProperty(t.prototype,"accessToken",{get:function(){return this.storage.getItem(this.accessTokenKey)},enumerable:!0,configurable:!0}),t.prototype.setAccessToken=function(t){this.storage.setItem(this.accessTokenKey,t)},Object.defineProperty(t.prototype,"lastCursor",{get:function(){return this.storage.getItem(this.lastCursorKey)},enumerable:!0,configurable:!0}),t.prototype.setLastCursor=function(t){this.storage.setItem(this.lastCursorKey,t)},t}();s=c([n.i(o.Injectable)(),a("design:paramtypes",["function"==typeof(u=void 0!==r.a&&r.a)&&u||Object,"function"==typeof(f=void 0!==i.b&&i.b)&&f||Object])],s);var u,f},"M+ym":function(t,e,n){"use strict";var o=n("XKz0"),r=n("/oeL"),i=n("ADVA"),c=n("bKpL"),a=(n.n(c),n("/zHi")),s=(n.n(a),n("R0J0")),u=(n.n(s),n("0DH1")),f=(n.n(u),n("PLb/")),p=(n.n(f),n("W+Ob")),l=n("uc1U");n.d(e,"a",function(){return y});var d=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},h=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},y=(function(){function t(){}}(),function(){function t(){}}(),function(){function t(){}}(),function(){function t(){}}(),function(){function t(t,e,n){var r=this;this.http=t,this.cloud=e;var i=e.adjustApiPath||function(t){return t};this.mediaUrlTemplate=e.apiBaseAddress+i("/Media/")+e.root+"{+path}",this.deleteFileUrl=e.apiBaseAddress+i("/Fileops/Delete"),this.deltaUrl=e.apiBaseAddress+i("/Delta"),n.select(l.b).subscribe(function(t){return r.headers=(new o.c).set("Authorization","Bearer "+t)})}return t.prototype.getFileUrl=function(t){return this.http.post(u.expand(this.mediaUrlTemplate,{path:t}).valueOf(),void 0,{headers:this.headers})},t.prototype.deleteFile=function(t){var e=new URLSearchParams;return e.set("path",t),e.set("root",this.cloud.root),this.http.post(this.deleteFileUrl,e,{headers:this.headers})},t.prototype.delta=function(t){var e=this,n=new URLSearchParams;return t&&n.set("cursor",t),this.http.post(this.deltaUrl,n,{headers:this.headers}).map(this.processDeltaResponse).switchMap(function(n){var o=n[0],r=n[1];console.log("DELTA %s",t);var i=c.Observable.of(o);return r&&(i=i.concat(e.delta(o.cursor))),i})},t.prototype.processDeltaResponse=function(t){var e=[],n=[];return t.entries.forEach(function(t){var o=t[1];null!==o?e.push({path:t[0],isDirectory:o.is_dir,mimeType:o.mime_type}):n.push(t[0])}),[{updatedItems:e,deletedPaths:n,cursor:t.cursor},t.has_more]},t}());y=d([n.i(r.Injectable)(),h("design:paramtypes",["function"==typeof(b=void 0!==o.d&&o.d)&&b||Object,"function"==typeof(v=void 0!==p.b&&p.b)&&v||Object,"function"==typeof(m=void 0!==i.c&&i.c)&&m||Object])],y);var b,v,m},"Omr/":function(t,e,n){"use strict";var o=n("/oeL"),r=n("ycpL");n.d(e,"a",function(){return a});var i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(t){this.window=t,this.confirmClick=new o.EventEmitter}return t.prototype.onClick=function(){return!!this.window.nativeWindow.confirm("Are you sure?")&&(this.confirmClick.emit(),!0)},t}();i([n.i(o.Output)(),c("design:type",Object)],a.prototype,"confirmClick",void 0),i([n.i(o.HostListener)("click"),c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],a.prototype,"onClick",null),a=i([n.i(o.Directive)({selector:"[confirmClick]"}),c("design:paramtypes",["function"==typeof(s=void 0!==r.a&&r.a)&&s||Object])],a);var s},"Pm+b":function(t,e,n){"use strict";var o=n("/oeL"),r=n("ADVA"),i=n("E/BQ"),c=(n.n(i),n("uc1U")),a=n("hrfS");n.d(e,"a",function(){return f});var s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t,e){var n=this;this.store=t,this.currentFile$=t.select(c.d),this.busy$=t.select(c.e),e.add(new i.Hotkey("ctrl+right",function(){return n.next(),!1}))}return t.prototype.ngOnInit=function(){this.store.dispatch(new a.c)},t.prototype.next=function(){this.store.dispatch(new a.a)},t.prototype.delete=function(t){this.store.dispatch(new a.e(t))},t}();f=s([n.i(o.Component)({template:n("hULB")}),u("design:paramtypes",["function"==typeof(p=void 0!==r.c&&r.c)&&p||Object,"function"==typeof(l=void 0!==i.HotkeysService&&i.HotkeysService)&&l||Object])],f);var p,l},SOsc:function(t,e){t.exports='<div *ngIf="file">\n  <audio autoplay controls [src]="file.url" (ended)="onNext()">\n    Your browser doesn\'t support the <em>audio</em> element\n  </audio>\n</div>\n<div>\n    <button type="button" (click)="onNext()" [disabled]="busy">Next</button>\n    <button type="button" (confirmClick)="onDelete()" [disabled]="busy">Delete</button>\n</div>'},SkF4:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t.prototype.intercept=function(t,e){return t.body instanceof URLSearchParams&&(t=t.clone({body:t.body.toString(),headers:t.headers.set("Content-Type","application/x-www-form-urlencoded")})),e.handle(t)},t}()},"W+Ob":function(t,e,n){"use strict";function o(t){return{authzEndpoint:"https://meocloud.pt/oauth2/authorize",apiBaseAddress:"https://publicapi.meocloud.pt/1",root:"meocloud",clientId:t,name:"meocloud",displayName:"MEO Cloud",shouldReadTags:!1}}function r(t){return{authzEndpoint:"https://www.dropbox.com/1/oauth2/authorize",apiBaseAddress:"https://api.dropboxapi.com/1",adjustApiPath:function(t){return t.toLowerCase()},root:"auto",clientId:t,name:"dropbox",displayName:"Dropbox",shouldReadTags:!0}}n.d(e,"b",function(){return i}),n.d(e,"a",function(){return c});var i=function(){function t(){}return t}(),c={meocloud:o,dropbox:r}},W675:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"aR8+":function(t,e,n){"use strict";function o(t){return{cloud:{accessToken:t.accessToken},player:{files:[],busy:!1}}}var r=n("fc+i"),i=n("/oeL"),c=n("BkNc"),a=n("XKz0"),s=n("ADVA"),u=n("Tl+Y"),f=n("E/BQ"),p=(n.n(f),n("wQAS")),l=n("yOJg"),d=n("Pm+b"),h=n("fR+C"),y=n("M+ym"),b=n("heDI"),v=n("7PZZ"),m=n("J1RF"),g=n("ycpL"),O=n("xiBr"),j=n("SkF4"),R=n("p5Ee"),_=n("W+Ob"),w=n("uc1U"),D=n("6LYz"),P=n("cD6K"),A=n("zoAr"),L=n("Omr/");n.d(e,"a",function(){return I});var k=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},E=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},F=_.a[R.a.cloudName](R.a.clientId),S=[{path:"player",component:d.a,canActivate:[O.a]},{path:"oauth/:mode",component:h.a},{path:"",component:l.a}],C=function(){function t(t){this.actions$=t,this.log=this.actions$.do(console.log)}return t}();k([n.i(u.a)({dispatch:!1}),E("design:type",Object)],C.prototype,"log",void 0),C=k([n.i(i.Injectable)(),E("design:paramtypes",["function"==typeof(T=void 0!==u.b&&u.b)&&T||Object])],C);var I=function(){function t(){}return t}();I=k([n.i(i.NgModule)({declarations:[p.a,l.a,d.a,A.a,h.a,L.a],imports:[r.a,c.a.forRoot(S),a.a,s.a.forRoot(w.a),u.c.forRoot([C,D.a,P.a]),f.HotkeyModule.forRoot()],providers:[{provide:_.b,useValue:F},{provide:s.b,useFactory:o,deps:[m.a]},y.a,b.a,v.a,m.a,g.a,O.a,{provide:a.b,useClass:j.a,multi:!0}],bootstrap:[p.a]})],I);var T},auOE:function(t,e){t.exports='<a *ngIf="hasToken$ | async" routerLink="/player">Start player</a>\n<a *ngIf="!(hasToken$ | async)" routerLink="/oauth/authorize">Associate {{cloud.displayName}}</a>\n'},cD6K:function(t,e,n){"use strict";var o=n("eqpX"),r=(n.n(o),n("5v8a")),i=(n.n(r),n("Pic8")),c=(n.n(i),n("asHm")),a=(n.n(c),n("/oeL")),s=n("Tl+Y"),u=n("ADVA"),f=n("Dqrr"),p=(n.n(f),n("VsKd")),l=(n.n(p),n("7PZZ")),d=n("M+ym"),h=n("J1RF"),y=n("hrfS");n.d(e,"a",function(){return g});var b=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},v=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},m=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},g=function(){function t(t,e,n,o,r){var i=this;this.actions$=t,this.store=e,this.fileManager=n,this.cloudClient=o,this.persistence=r,this.openDatabase$=f.Observable.defer(function(){return i.fileManager.openDatabase()}),this.loadFile=this.actions$.ofType(y.a.type).withLatestFrom(this.store).map(function(t){t[0];return t[1].player.files}).map(function(t){return t[Math.floor(Math.random()*t.length)]}).switchMap(function(t){return i.cloudClient.getFileUrl(t.path).map(function(e){return new y.b(b({},t,{url:e.url}))})}),this.updateFileList=this.actions$.ofType(y.c.type).switchMap(function(){return i.cloudClient.delta(i.persistence.lastCursor).switchMap(function(t){return i.fileManager.processUpdate(t)}).do(function(t){return i.persistence.setLastCursor(t.cursor)}).last()}).switchMap(function(){return i.fileManager.getFiles()}).map(function(t){return new y.d(t)}),this.deleteFile=this.actions$.ofType(y.e.type).switchMap(function(t){return i.cloudClient.deleteFile(t.payload.path).map(function(){return new y.f(t.payload)})}),this.deleteFileSuccess=this.actions$.ofType(y.d.type,y.f.type).map(function(){return new y.a})}return t}();v([n.i(s.a)({dispatch:!1}),m("design:type",Object)],g.prototype,"openDatabase$",void 0),v([n.i(s.a)(),m("design:type",Object)],g.prototype,"loadFile",void 0),v([n.i(s.a)(),m("design:type",Object)],g.prototype,"updateFileList",void 0),v([n.i(s.a)(),m("design:type",Object)],g.prototype,"deleteFile",void 0),v([n.i(s.a)(),m("design:type",Object)],g.prototype,"deleteFileSuccess",void 0),g=v([n.i(a.Injectable)(),m("design:paramtypes",["function"==typeof(O=void 0!==s.b&&s.b)&&O||Object,"function"==typeof(j=void 0!==u.c&&u.c)&&j||Object,"function"==typeof(R=void 0!==l.a&&l.a)&&R||Object,"function"==typeof(_=void 0!==d.a&&d.a)&&_||Object,"function"==typeof(w=void 0!==h.a&&h.a)&&w||Object])],g);var O,j,R,_,w},cDNt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("/oeL"),r=n("Qa4U"),i=n("aR8+");n("p5Ee").a.production&&n.i(o.enableProdMode)(),n.i(r.a)().bootstrapModule(i.a)},efyd:function(t,e){t.exports="<router-outlet></router-outlet>"},"fR+C":function(t,e,n){"use strict";var o=n("/oeL"),r=n("BkNc"),i=n("ADVA"),c=n("heDI"),a=n("ycpL"),s=n("/9Vk");n.d(e,"a",function(){return d});var u=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p="authorize",l="callback",d=function(){function t(t,e,n,o,r){var i=t.snapshot;switch(i.paramMap.get("mode")){case p:r.nativeWindow.location.href=n.prepareAuthzRequest(),this.message="Redirecting to authorization service...";break;case l:var a=n.processAuthzResponse(i.fragment);a instanceof c.b?(this.message="Successful authorization",o.dispatch(new s.a(a.token)),e.navigate(["/player"])):this.message=a.error;break;default:throw{message:"Unknown OAuth mode"}}}return t}();d=u([n.i(o.Component)({template:n("m1iw"),styles:[n("usC9")]}),f("design:paramtypes",["function"==typeof(h=void 0!==r.b&&r.b)&&h||Object,"function"==typeof(y=void 0!==r.c&&r.c)&&y||Object,"function"==typeof(b=void 0!==c.a&&c.a)&&b||Object,"function"==typeof(v=void 0!==i.c&&i.c)&&v||Object,"function"==typeof(m=void 0!==a.a&&a.a)&&m||Object])],d);var h,y,b,v,m},hULB:function(t,e){t.exports='<current-file\n    [file]="currentFile$ | async"\n    [busy]="busy$ | async"\n    (next)="next()"\n    (delete)="delete($event)">\n</current-file>'},heDI:function(t,e,n){"use strict";(function(t){var o=n("/oeL"),r=n("qbdv"),i=n("oWdM"),c=n.n(i),a=n("7JKt"),s=(n.n(a),n("0DH1")),u=(n.n(s),n("W+Ob")),f=n("ycpL");n.d(e,"b",function(){return d}),n.d(e,"a",function(){return y});var p=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t){this.token=t}return t}(),h=function(){function t(t){this.error=t}return t}(),y=function(){function e(t,e,n){this.cloud=t,this.location=e,this.authzUrlTemplate=a(t.authzEndpoint+"?response_type=token&client_id={client_id}&redirect_uri={redirect_uri}&state={state}");var o=n.nativeWindow;this.baseAddress=o.location.origin,this.crypto=o.crypto,this.storage=o.sessionStorage}return e.prototype.prepareAuthzRequest=function(e){void 0===e&&(e="");var n=new Uint8Array(16);this.crypto.getRandomValues(n);var o=c.a.encode(new t(n));return this.storage.setItem("oauth_state",o),this.authzUrlTemplate.fillFromObject({client_id:this.cloud.clientId,redirect_uri:this.baseAddress+this.location.prepareExternalUrl(e),state:o})},e.prototype.processAuthzResponse=function(t){var e=s.parseQuery(t);if(!e.state)return new h("invalid response");var n=this.storage.getItem("oauth_state");return this.storage.removeItem("oauth_state"),n&&n===e.state?e.error?new h(e.error):e.access_token?new d(e.access_token):new h("invalid response"):new h("missing or invalid state")},e}();y=p([n.i(o.Injectable)(),l("design:paramtypes",["function"==typeof(b=void 0!==u.b&&u.b)&&b||Object,"function"==typeof(v=void 0!==r.Location&&r.Location)&&v||Object,"function"==typeof(m=void 0!==f.a&&f.a)&&m||Object])],y);var b,v,m}).call(e,n("v0OU").Buffer)},hrfS:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return r}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return c}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return s});var o=function(){function t(){this.type=t.type}return t}();o.type="PLAYER__LOAD_RANDOM_FILE";var r=function(){function t(e){this.payload=e,this.type=t.type}return t}();r.type="PLAYER__LOAD_RANDOM_FILE_SUCCESS";var i=function(){function t(e){this.payload=e,this.type=t.type}return t}();i.type="PLAYER__DELETE_FILE";var c=function(){function t(e){this.payload=e,this.type=t.type}return t}();c.type="PLAYER__DELETE_FILE_SUCCESS";var a=function(){function t(){this.type=t.type}return t}();a.type="PLAYER__UPDATE_FILES";var s=function(){function t(e){this.payload=e,this.type=t.type}return t}();s.type="PLAYER__UPDATE_FILES_SUCCESS"},m1iw:function(t,e){t.exports="<p>{{message}}</p>"},n7du:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="n7du"},nGvY:function(t,e,n){"use strict";function o(t,e){switch(e.type){case r.a.type:return i({},t,{busy:!0});case r.b.type:return i({},t,{currentFile:e.payload,busy:!1});case r.c.type:return i({},t,{busy:!0});case r.d.type:return i({},t,{files:e.payload,busy:!1});case r.e.type:return i({},t,{busy:!0});case r.f.type:return i({},t,{files:t.files.filter(function(t){return t!==e.payload}),busy:!1})}return t}var r=n("hrfS");e.a=o,n.d(e,"b",function(){return c}),n.d(e,"c",function(){return a});var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},c=function(t){return t.currentFile},a=function(t){return t.busy}},p5Ee:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={production:!0,cloudName:"meocloud",clientId:"6abdf380-083a-453a-9e36-1b1528ab8255"}},uc1U:function(t,e,n){"use strict";var o=n("ADVA"),r=n("BKIR"),i=n("nGvY");n.d(e,"a",function(){return c}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return f});var c={cloud:r.a,player:i.a},a=n.i(o.d)(function(t){return t.cloud},r.b),s=n.i(o.d)(a,function(t){return!!t}),u=n.i(o.d)(function(t){return t.player},i.b),f=n.i(o.d)(function(t){return t.player},i.c)},usC9:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},wQAS:function(t,e,n){"use strict";var o=n("/oeL");n.d(e,"a",function(){return i});var r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},i=function(){function t(){}return t}();i=r([n.i(o.Component)({selector:"cp-root",template:n("efyd"),styles:[n("W675")]})],i)},xiBr:function(t,e,n){"use strict";var o=n("/oeL"),r=n("BkNc"),i=n("ADVA"),c=n("uc1U");n.d(e,"a",function(){return u});var a=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e){this.store=t,this.router=e}return t.prototype.canActivate=function(){var t=this;return this.store.select(c.c).map(function(e){return e||t.router.navigate(["/oauth","authorize"]),e})},t}();u=a([n.i(o.Injectable)(),s("design:paramtypes",["function"==typeof(f=void 0!==i.c&&i.c)&&f||Object,"function"==typeof(p=void 0!==r.c&&r.c)&&p||Object])],u);var f,p},yOJg:function(t,e,n){"use strict";var o=n("/oeL"),r=n("BkNc"),i=n("ADVA"),c=n("0DH1"),a=(n.n(c),n("W+Ob")),s=n("uc1U");n.d(e,"a",function(){return p});var u=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,n,o){this.cloud=t,this.hasToken$=o.select(s.c);var r=e.snapshot;if(r.fragment&&n.navigate(["/oauth/callback"],{preserveFragment:!0}),r.queryParams.error){var i=c.buildQuery(r.queryParams);n.navigate(["/oauth/callback"],{fragment:i})}}return t}();p=u([n.i(o.Component)({template:n("auOE"),styles:[n("Dk7z")]}),f("design:paramtypes",["function"==typeof(l=void 0!==a.b&&a.b)&&l||Object,"function"==typeof(d=void 0!==r.b&&r.b)&&d||Object,"function"==typeof(h=void 0!==r.c&&r.c)&&h||Object,"function"==typeof(y=void 0!==i.c&&i.c)&&y||Object])],p);var l,d,h,y},ycpL:function(t,e,n){"use strict";var o=n("/oeL");n.d(e,"a",function(){return i});var r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},i=function(){function t(){}return Object.defineProperty(t.prototype,"nativeWindow",{get:function(){return window},enumerable:!0,configurable:!0}),t}();i=r([n.i(o.Injectable)()],i)},zoAr:function(t,e,n){"use strict";var o=n("/oeL"),r=n("+Wpa");n.d(e,"a",function(){return a});var i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(){this.delete=new o.EventEmitter,this.next=new o.EventEmitter}return t.prototype.onNext=function(){this.next.emit()},t.prototype.onDelete=function(){this.delete.emit(this.file)},t}();i([n.i(o.Input)(),c("design:type","function"==typeof(s=void 0!==r.a&&r.a)&&s||Object)],a.prototype,"file",void 0),i([n.i(o.Input)(),c("design:type",Boolean)],a.prototype,"busy",void 0),i([n.i(o.Output)(),c("design:type",Object)],a.prototype,"delete",void 0),i([n.i(o.Output)(),c("design:type",Object)],a.prototype,"next",void 0),a=i([n.i(o.Component)({selector:"current-file",template:n("SOsc")})],a);var s}},[0]);